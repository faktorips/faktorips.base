<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.faktorips</groupId>
        <artifactId>faktorips-nexus-base-8</artifactId>
        <version>22.6.0-SNAPSHOT</version>
        <relativePath>../../org.faktorips.aggregator/nexus8/pom.xml</relativePath>
    </parent>

    <groupId>org.faktorips</groupId>
    <artifactId>faktorips-runtime-client</artifactId>

    <name>Faktor-IPS Runtime Client Library</name>
    <description>Client Runtime library for Faktor-IPS</description>

    <licenses>
        <license>
            <name>GNU Affero General Public License Version 3 with additional permissions</name>
            <url>http://www.gnu.org/licenses/agpl-3.0-standalone.html</url>
            <distribution>repo</distribution>
            <comments>The following additional permissions and restrictions are 
stated by Faktor Zehn GmbH in accordance with section 7 of the AGPL: 

If you modify the Program or any covered work, by linking or 
combining it with libraries of the namespace org.eclipse.* and 
org.junit (including dependencies or a modified version of
these libraries), thus containing parts covered by the terms of 
Eclipse Public License Version 1.0 (EPL), the licensors of this 
Program grant you the additional permission to convey the 
resulting work.

If you modify the Program or any covered work, without changing 
its source code, only by linking or combining some or all 
bundles of the Program with separate works covered by AGPL-
incompatible license terms, the licensors of this Program grant
you the additional permission to convey the resulting work.

You are not allowed to remove or alter any legal notices in the
covered work or in the Appropriate Legal Notices.</comments>
        </license>
        <license>
            <name>Alternative Faktor-IPS License</name>
            <distribution>repo</distribution>
            <comments>If AGPL licensing 
is incompatible with your use of Faktor-IPS, alternative 
license terms are available from Faktor Zehn GmbH.</comments>
        </license>
    </licenses>

    <properties>
        <flatten-maven-plugin-version>1.2.7</flatten-maven-plugin-version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.faktorips</groupId>
            <artifactId>faktorips-valuetypes</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>target/client-src</sourceDirectory>
        <plugins>
            <plugin>
                <!-- copy client relevant source files first (generate-sources) -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>3.2.0</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.shared</groupId>
                        <artifactId>maven-filtering</artifactId>
                        <version>3.3.0</version>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <id>copy-source-files</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${basedir}/target/client-src</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>../src</directory>
                                    <filtering>true</filtering>
                                    <includes>
                                        <include>**/Message*.java</include>
                                        <include>**/Severity.java</include>
                                        <include>**/IMarker.java</include>
                                        <include>**/IPropertyQualifier.java</include>
                                        <include>**/MsgReplacementParameter.java</include>
                                        <include>**/ObjectProperty.java</include>
                                        <include>**/IEnumValue.java</include>
                                        <include>**/UtilityClass.java</include>
                                        <include>**/IPredicate.java</include>
                                        <include>**/StringBuilderJoiner.java</include>
                                        <include>**/IpsStringUtils.java</include>
                                        <include>**/AbstractMessageList.java</include>
                                        <include>**/IMessage.java</include>
                                    </includes>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>flatten-maven-plugin</artifactId>
                <version>${flatten-maven-plugin-version}</version>
                <configuration>
                    <pomElements>
                        <name>keep</name>
                        <description>keep</description>
                        <build>remove</build>
              </pomElements>
                </configuration>
                <executions>
                    <!-- enable flattening -->
                    <execution>
                        <id>flatten</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>flatten</goal>
                        </goals>
                    </execution>
                    <!-- ensure proper cleanup -->
                    <execution>
                        <id>flatten.clean</id>
                        <phase>clean</phase>
                        <goals>
                            <goal>clean</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>