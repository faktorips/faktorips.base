<?xml version="1.0" encoding="UTF-8"?>
<merge:options
  braceStyle="matching"  
  redirect="Gen"
  block="\s*@\s*generated\s*NOT\s*(?:\n\r?|\r\n?)"
  xmlns:merge="http://www.eclipse.org/org/eclipse/emf/codegen/jmerge/Options">

	<merge:dictionaryPattern name="generatedUnmodifiableMembers" select="Member/getComment" match="@\s*(gen)erated\s*(This field/method[^(?:\n\r?|\r\n?)]*)*(?:\n\r?|\r\n?)"/>
	<merge:dictionaryPattern name="generatedRestrainedModifableMember" select="Member/getComment" match="\s*@\s*(restrained)modifiable\s*\n"/>

	<merge:pull sourceGet="Member/getFlags" targetMarkup="^gen$" equals="Member/getName" targetPut="Member/setFlags"/>
	<merge:pull sourceGet="Type/getSuperInterfaces" sourceTransfer="(\s*@\s*extends|\s*@\s*implements)(.*?)(?:&lt;!--|(?:\n\r?|\r\n?))" targetMarkup="^gen$" targetPut="Type/addSuperInterface"/>
	<merge:pull sourceGet="Type/getSuperclass" targetMarkup="^gen$" targetPut="Type/setSuperclass"/>
	<merge:pull sourceGet="Method/getBody" targetMarkup="^gen$" targetPut="Method/setBody"/>    	
	<merge:pull sourceGet="Method/getReturnType" targetMarkup="^gen$" targetPut="Method/setReturnType"/>
	<merge:pull sourceGet="Method/getExceptions" targetMarkup="^gen$" targetPut="Method/addException"/>
	<merge:pull sourceGet="Method/getComment" targetMarkup="^gen$" targetPut="Method/setComment"/>
	<merge:pull sourceGet="Field/getType" targetMarkup="^gen$" targetPut="Field/setType"/>
	<merge:pull sourceGet="Field/getInitializer" targetMarkup="^gen$" targetPut="Field/setInitializer"/>
	<merge:pull sourceGet="Field/getComment" targetMarkup="^gen$" targetPut="Field/setComment"/>
	<merge:pull targetMarkup="^restrained$" sourceTransfer="(\s*//\s*begin-user-code.*?//\s*end-user-code\s*)\n" sourceGet="Method/getBody" targetPut="Method/setBody"/>
	<merge:pull sourceGet="Enum/getSuperInterfaces" sourceTransfer="(\s*@\s*extends|\s*@\s*implements)(.*?)(?:&lt;!--|(?:\n\r?|\r\n?))" targetMarkup="^gen$" targetPut="Enum/addSuperInterface"/>
	<merge:pull sourceGet="EnumConstant/getArguments" targetMarkup="^gen$" targetPut="EnumConstant/setArguments"/>
	<merge:pull sourceGet="EnumConstant/getBody" targetMarkup="^gen$" targetPut="EnumConstant/setBody"/>
	
	<merge:pull sourceGet="AnnotationTypeMember/getType" targetMarkup="^gen$" targetPut="AnnotationTypeMember/setType"/>
    <merge:pull sourceGet="AnnotationTypeMember/getDefaultValue" targetMarkup="^gen$" targetPut="AnnotationTypeMember/setDefaultValue"/>

	<merge:push targetParentMarkup="^gen$" select="Annotation"/>


	<merge:sweep markup="^gen$" select="Member"/>
	<!-- Remove annotations of generated target nodes if the annotation is not in the source -->
	<merge:sweep parentMarkup="^gen$" select="Annotation" />
	
</merge:options>

<!-- There is currently a problem when merging javadoc of members. The merging of javadoc of methods and field still works in
     the way that the javadoc of the target is overridden by the javadoc of the source as long as the target is marked 
     @generated. The merging of the javadoc of the type has been disabled for the moment because it conflicted with the
     functionality of adding additional interfaces to the type. Adding addtion interfaces to a type is accomplished by
     an @implements marker in the type javadoc section of the target. By means of the Type/getSuperInterfaces pull rule,
     see above, the part specified after @implements will be added to implements part of the class definition. 
     If there would be a rule in place that overrides the type javadoc also the @implements part would be overridden and
     therefore the mechanism of adding additional interfaces to the class definition wouldn't work.
     See faktorips.org flyspray entry No. where the fixing of this problem is addressed. 
	 The pull rules below are there to keep remembering the alternatives.	 
		<merge:pull sourceMarkup="^gen$" sourceGet="Type/getComment" sourceTransfer="(\s*begin-user-doc.*?end-user-doc\s*)(?:\n\r?|\r\n?)" targetMarkup="^gen$" targetPut="Type/setComment"/>
		<merge:pull targetMarkup="^gen$" sourceGet="Member/getComment" targetPut="Member/setComment"/>
-->


<!-- New addtional
<merge:pull sourceGet="Type/getTypeParameters" targetMarkup="^gen$" targetPut="Type/setTypeParameters"/>
  <merge:pull 
    sourceGet="Method/getTypeParameters"
    targetMarkup="^gen$"
    targetPut="Method/setTypeParameters"/>

<merge:pull sourceGet="Annotation/getContents" targetParentMarkup="^gen$" targetPut="Annotation/setContents"/>

-->

<!--

-->
