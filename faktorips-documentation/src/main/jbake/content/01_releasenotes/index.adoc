:jbake-title: Release Notes
:jbake-type: chapter
:jbake-status: published
:jbake-order: 10
:images-folder: {images}releasenotes/

== Release Notes

=== Version 21.12.2

Version 21.12.2 bringt Performance-Verbesserungen bei der Verwendung großer Modelle in JARs in der Faktor-IPS-Designzeitumgebung(Eclipse-Plugin). Ein Update der Runtime-Dependencies ist nicht notwendig.

=== Version 21.12.1

Das Patch-Release 21.12.1 korrigiert einige Links in der Dokumentation und behebt zwei Fehler:

 * Locale wird auf MacOS manchmal nicht erkannt (https://jira.faktorzehn.de/browse/FIPS-8512[FIPS-8512])
 * Migration auf Produktvarianten 21.12 entfernt doppelte Leerzeichen in Labels (https://jira.faktorzehn.de/browse/IPSPV-587[IPSPV-587])
 
Die Fehler betreffen nicht die Runtime, so dass nur ein Update der Features in Eclipse notwendig ist. 

=== Version 21.12.0

==== Neue Funktionen und Verbesserungen

===== Schemas für IPS-XML-Dateien (https://jira.faktorzehn.de/browse/FIPS-7445[FIPS-7445])
Faktor-IPS nutzt XML zur Speicherung aller IPS-Objekte im Workspace. Da diese Dateien nur von Faktor-IPS geschrieben und gelesen werden war eine Validierung des Inhalts gegen ein XML-Schema bisher nicht nötig. 
Da nun immer mehr Entwickler kleinere Anpassungen an IPS-Objekten gerne auch außerhalb von Faktor-IPS, zum Beispiel mit anderen IDEs oder Texteditoren, vornehmen wollen kann über die Einstellung "validateIpsSchema" 
in der .ipsproject-Konfigurationsdatei jetzt eine Schema-Referenz in die Dateien geschrieben wird gegen das beim Lesen und Kompilieren dann validiert wird. Diese Einstellung kann auch im Zuge der Migration aktiviert werden.

===== Erweiterung des Maven-Mojos (https://jira.faktorzehn.de/browse/FIPS-7572[FIPS-7572], https://jira.faktorzehn.de/browse/FIPS-8014[FIPS-8014], https://jira.faktorzehn.de/browse/FIPS-7796[FIPS-7796], https://jira.faktorzehn.de/browse/FIPS-8026[FIPS-8026])
Das Maven-Plugin wurde um den Parameter <buildIpsOnly> erweitert der standardmäßig auf `true` gesetzt ist. +
Damit wird gesteuert das der "faktorips-build" nur noch den Quellcode generiert, der dann erst vom nachfolgenden "maven-compile" kompiliert wird. +

Ebenfalls wurde das Build-Mojo um die Möglichkeit erweitert einen inkrementellen Build zu machen. Somit wird nicht mehr automatisch das Arbeitsverzeichnis gelöscht und alles neu importiert, sondern nur noch wenn die Phase `clean` angeben wird. +

Das Logging des "faktorips-build" wurde mit der platform debug tracing facility von Eclipse erweitert und kann mit der Maven Option `-X` aktiviert werden. Falls die Standard-Einstellungen nicht passend sind kann mit dem Parameter `<debugLogOptions>`
eine eigene Tracing Options Datei angegeben werden. Siehe: https://wiki.eclipse.org/FAQ_How_do_I_use_the_platform_debug_tracing_facility[FAQ How do I use the platform debug tracing facility]

===== Erweiterungen der Ant-Tasks (https://jira.faktorzehn.de/browse/FIPS-8014[FIPS-8014])
Der Ant-Task _FullBuildTask_ wurde in _BuildTask_ umbenannt und um zwei Optionen `ipsOnly` und `fullBuild` erweitert.+
Dabei steuert die Option _ipsOnly_ das nur der Faktor-Ips Builder gestartet wird, nicht aber die anderen im Projekt konfigurierten Builder. +
Die Option _fullBuild_ steuert dabei ob der Build als Voller- oder Inkrementeller-Build gestartet wird. +

Die Tasks _MavenProjectImportTask_ und _ProjectImportTask_ werfen jetzt keine Fehler mehr wenn die zu importierenden Projekte bereits existieren.

===== Jakarta Persistence 2.2 (https://jira.faktorzehn.de/browse/FIPS-7741[FIPS-7741])
In Folge der Freigabe von Java EE durch Oracle wurde das Open-Source-Projekt Jakarta EE gegründet. Aus Namensrechtlichen Gründen wurden in einem ersten Schritt alle Artefakte umbenannt und nutzen jetzt nicht mehr "Java" im Namen sondern "Jakarta". 
Da diverse Projekte wie z.B. Spring ihre Dependencies auf diese neuen Artefakte umgestellt haben bietet auch Faktor-IPS die Möglichkeit "Jakarta Persistence 2.2" als Persistence-Provider für die Abbildung von Faktor-IPS-Vertragsobjekten in Datenbanken zu verwenden. 
Die generierten Annotations sind identisch mit denen des "Generic JPA 2.1" Persistence Providers, lediglich die Dependencies die in Maven-Projekten beim Anlegen oder Hinzufügen der IPS-Nature eingetragen werden ändern sich auf

[source, xml]
----
<dependency> 
    <groupId>jakarta.persistence</groupId> 
    <artifactId>jakarta.persistence-api</artifactId> 
    <version>2.2.3</version> 
</dependency>
----

Erst mit einer kommenden Faktor-IPS-Version wird auch Jakarta Persistence 3 unterstützt werden, welches als Teil von Jakarta EE 9 dann auch für die Annotations den Namensraum von "javax.persistence" zu "jakarta.persistence" ändert.

===== Neue Annotation @IpsGenerated (https://jira.faktorzehn.de/browse/FIPS-8109[FIPS-8109])
Viele Entwickler benutzen Werkzeuge zur automatischen Einschätzung der Codequalität. Dabei soll aber natürlich nur der selbst geschriebene Code, nicht der von Faktor-IPS generierte geprüft werden. Viele Werkzeuge lassen sich dazu über Kommentare oder Annotations steuern. 
Mit org.faktorips.runtime.annotation.IpsGenerated gibt es jetzt eine auch in kompilierten Klassen erhalten bleibende Annotation, die Faktor-IPS über die Einstellung +
`<Property name="additionalAnnotations" value="org.faktorips.runtime.annotation.IpsGenerated"/>` +
an alle generierten Methoden generieren kann, um damit z.B. SonarQube/JaCoCo von der Analyse dieser Methoden abzuhalten.

===== Java 17 (https://jira.faktorzehn.de/browse/FIPS-7865[FIPS-7865])
Faktor-IPS 21.12 läuft jetzt auch mit Java 17 und weiterhin mit Java 11.

===== Migration (https://jira.faktorzehn.de/browse/FIPS-8143[FIPS-8143])
Bei der Migration auf Faktor-IPS 21.12 kann die Einstellung "validateIpsSchema" für die migrierten Projekte gesetzt und damit eine XML-Schema-Referenz in alle IPS-XML-Dateien geschrieben werden.

===== Deprecation des loggingFrameworkConnectors (https://jira.faktorzehn.de/browse/FIPS-8120[FIPS-8120])
Den Extension Point loggingFrameworkConnector und das dazugehörige Interface IIpsLoggingFrameworkConnector haben wir als Deprecated markiert, da wir ihn in keinem Builder mehr nutzen.

===== Navigation zu Produktvorlagen (https://jira.faktorzehn.de/browse/FIPS-7398[FIPS-7398])
Da Vorlagen in der Produktdefintionsperspektive sichtbar und bearbeitbar sind können diese nun auch unabhängig von der Einstellung "Navigation zum Modell oder Java-Sourcecode möglich" navigiert werden.

image:{images-folder}navigate_template_de.png[width=598,height=254,align="center"]

===== Matcher (https://jira.faktorzehn.de/browse/FIPS-8175[FIPS-8175])
Die Matcher für die `org.faktorips.runtime.MessageList` aus `de.faktorzehn.commons.ips.test.matcher.IpsMatchers` sind nun auch Teil von Faktor-IPS und (unter teilweise anderem Namen) in `org.faktorips.testsupport.IpsMatchers` verfügbar. Zusätzlich gibt es Matcher für `org.faktorips.valueset.ValueSet` in `org.faktorips.testsupport.ValueSetMatchers`. +
Maven-Dependency:

[source, xml]
----
<dependency> 
    <groupId>org.faktorips</groupId> 
    <artifactId>org.faktorips.testsupport</artifactId> 
    <scope>test</scope>
</dependency>
----

===== Weitere Funktionen und Verbesserungen
 * neuer Extension Point beim Speichern eines Produktkonfigurationsbausteines (https://jira.faktorzehn.de/browse/FIPS-7549[FIPS-7549])
 * Dokumentation zu Relevanzen (https://jira.faktorzehn.de/browse/FIPS-7761[FIPS-7761])
 * Abstrakte Enums als Datentyp für reine Vertragsattribute an konkreten Vertragstypen (https://jira.faktorzehn.de/browse/FIPS-6875[FIPS-6875])
 * Attribut "beinhaltet <null>" anders darstellen (https://jira.faktorzehn.de/browse/FIPS-7129[FIPS-7129])
 * Navigation zu Vorlagen sollte immer möglich sein (https://jira.faktorzehn.de/browse/FIPS-7398[FIPS-7398])
 * Reihenfolge von Custom Validations soll der im ExtensionPoint: org.faktorips.devtools.core.customValidation entsprechen. (https://jira.faktorzehn.de/browse/FIPS-7536[FIPS-7536])
 * Menü-Enablement sollte Ips-Objekte nicht unnötig instantiieren (https://jira.faktorzehn.de/browse/FIPS-7682[FIPS-7682])
 * jakarta.persistence 2.2 als Persistence Provider (https://jira.faktorzehn.de/browse/FIPS-7741[FIPS-7741])
 * Offizielle Eclipse-Update-Site als Default im Mojo nutzen (https://jira.faktorzehn.de/browse/FIPS-7816[FIPS-7816])
 * Java 17-Unterstützung (https://jira.faktorzehn.de/browse/FIPS-7865[FIPS-7865])
 * -Dmaven.repo.local auswerten und in Eclipse setzen (https://jira.faktorzehn.de/browse/FIPS-7922[FIPS-7922])
 * Versionsübergreifende Tests (https://jira.faktorzehn.de/browse/FIPS-7968[FIPS-7968])
 * Abfragemöglichkeit, ob ein ValueSet nicht eingeschränkt ist (https://jira.faktorzehn.de/browse/FIPS-7980[FIPS-7980])
 * Faktor-IPS Maven Plugin und Lombok sollen in einem Projekt verwendet werden können (https://jira.faktorzehn.de/browse/FIPS-7981[FIPS-7981])
 * Incremental IPS-Build (https://jira.faktorzehn.de/browse/FIPS-8014[FIPS-8014])
 * Logging verbessern (https://jira.faktorzehn.de/browse/FIPS-8026[FIPS-8026])
 * @Generated Annotation um generierten Code aus der CodeCoverage raus zu nehmen (https://jira.faktorzehn.de/browse/FIPS-8109[FIPS-8109])
 * loggingFrameworkConnector deprecaten (https://jira.faktorzehn.de/browse/FIPS-8120[FIPS-8120])
 * XML-Validierungs-Setting aktivieren (https://jira.faktorzehn.de/browse/FIPS-8143[FIPS-8143])
 * toString in PolicyCmptType-Subklassen sollte per default super aufrufen (https://jira.faktorzehn.de/browse/FIPS-8168[FIPS-8168])
 * Matchers aus f10-commons mit IPS veröffentlichen (https://jira.faktorzehn.de/browse/FIPS-8175[FIPS-8175])
 * SingleInternationalString in testsupport aufnehmen (https://jira.faktorzehn.de/browse/FIPS-8366[FIPS-8366])
 * Archetype für 21.12 anpassen (https://jira.faktorzehn.de/browse/FIPS-8389[FIPS-8389])
 * @IpsGenerated als Default in neuen Projekten eintragen (https://jira.faktorzehn.de/browse/FIPS-8404[FIPS-8404])
 * Schema für XMLs (https://jira.faktorzehn.de/browse/FIPS-7445[FIPS-7445])


==== Behobene Fehler
 * Fehlermeldung beschreibt die Anpassungsstufe, obwohl es keine Anpassungsstufen gibt (https://jira.faktorzehn.de/browse/FIPS-6836[FIPS-6836])
 * NPE beim Versuch eines Copy&Paste im Attribute Edit Dialog (https://jira.faktorzehn.de/browse/FIPS-1602[FIPS-1602])
 * Reiter Persistenz muss bei überschriebenen Attributen disabled sein (https://jira.faktorzehn.de/browse/FIPS-5847[FIPS-5847])
 * Konkreter Enum kann nicht auf abstrakt umgestellt werden (https://jira.faktorzehn.de/browse/FIPS-6450[FIPS-6450])
 * Wertebereich lässt sich beim Anlegen eines Produktbausteintyp-Attributs nicht ändern (https://jira.faktorzehn.de/browse/FIPS-6570[FIPS-6570])
 * IPS-Test findet Abhängigkeiten aus Maven-Dependencies nicht (https://jira.faktorzehn.de/browse/FIPS-6683[FIPS-6683])
 * "Beinhaltet <null>" in Produkt-Editor kann nicht entfernt werden, wenn in Vertragsklasse <null> nicht zugelassen ist. (https://jira.faktorzehn.de/browse/FIPS-6701[FIPS-6701])
 * NPE beim Anlegen eines Vertragsteiltyps (https://jira.faktorzehn.de/browse/FIPS-7062[FIPS-7062])
 * NullPointerException beim Ändern auf Anpassungsstufen (https://jira.faktorzehn.de/browse/FIPS-7187[FIPS-7187])
 * Aktive Attribut Eingabeelemente in Readonly Aufzählungstypen (https://jira.faktorzehn.de/browse/FIPS-7288[FIPS-7288])
 * Radio Buttons für Relevanz bleiben bei Template Nutzung readonly (https://jira.faktorzehn.de/browse/FIPS-7749[FIPS-7749])
 * Copy&Paste in Dialogen (https://jira.faktorzehn.de/browse/FIPS-7759[FIPS-7759])
 * NullPointerException bei Prüfen eines Wertes eines Attributes vom Typ Long in einer LongRange (https://jira.faktorzehn.de/browse/FIPS-7884[FIPS-7884])
 * IllegalArgumentException bei Prüfen eines Wertes eines Attributes vom Typ Money in ValueSet mit unterschiedlicher Währung (https://jira.faktorzehn.de/browse/FIPS-7885[FIPS-7885])
 * ProductCmptBuilder: cardinality fehlt im super Aufruf  (https://jira.faktorzehn.de/browse/FIPS-7909[FIPS-7909])
 * CSV Import an Tabelle anhängen speichert nicht auf Platte (https://jira.faktorzehn.de/browse/FIPS-7969[FIPS-7969])
 * Archetype funktioniert nicht in Eclipse (https://jira.faktorzehn.de/browse/FIPS-7970[FIPS-7970])
 * Leerzeile in generiertem Javadoc Kommentar bei Table Row Klassen (https://jira.faktorzehn.de/browse/FIPS-7971[FIPS-7971])
 * NullPointerException im ProduktStrukturExplorer (https://jira.faktorzehn.de/browse/FIPS-7973[FIPS-7973])
 * StringLengthValueSet: fehlerhafte Implementierung isEmpty() und isDiscrete() (https://jira.faktorzehn.de/browse/FIPS-7979[FIPS-7979])
 * "Struktur anzeigen" fehlt im Kontextmenü in Produktdefinitionsperspektive (https://jira.faktorzehn.de/browse/FIPS-8063[FIPS-8063])
 * Validierung für doppelte Kind-ID-Version-ID-Kombinationen nicht ausschaltbar (https://jira.faktorzehn.de/browse/FIPS-8073[FIPS-8073])
 * NPE when calling "getValues(true)" on a BigDecimalRange without a step (step = null) (https://jira.faktorzehn.de/browse/FIPS-8081[FIPS-8081])
 * Werte für DynamicEnumDatatype in TableContent nicht korrekt wählbar/dargestellt (https://jira.faktorzehn.de/browse/FIPS-8083[FIPS-8083])
 * Maven Build schlägt unregelmäßig fehl (https://jira.faktorzehn.de/browse/FIPS-8088[FIPS-8088])
 * DefaultRange.isUnrestricted(true) berücksichtigt empty Range nicht (https://jira.faktorzehn.de/browse/FIPS-8114[FIPS-8114])
 * Maven-Build hängt (https://jira.faktorzehn.de/browse/FIPS-8147[FIPS-8147])
 * Java 11 bricht XMLs mit Werten und Extension Properties um (https://jira.faktorzehn.de/browse/FIPS-8149[FIPS-8149])
 * NPE beim Unterschiede beheben (https://jira.faktorzehn.de/browse/FIPS-8156[FIPS-8156])
 * Produkt-Struktur-Explorer zeigt Regeln nicht an (https://jira.faktorzehn.de/browse/FIPS-8198[FIPS-8198])
 * faktorips-maven-plugin schlägt bei Maven Release fehl (https://jira.faktorzehn.de/browse/FIPS-8202[FIPS-8202])
 * No more handles im DeepCopyWizard (https://jira.faktorzehn.de/browse/FIPS-8219[FIPS-8219])
 * Long-Attribute in FIPS-Enums erzeugen nicht kompilierbaren Code bei großen Werten (https://jira.faktorzehn.de/browse/FIPS-8226[FIPS-8226])
 * Datum-Picker in Eclipse 21.6 (https://jira.faktorzehn.de/browse/FIPS-8230[FIPS-8230])
 * Schema für PolicyCmptType funktioniert nicht mit Produktvarianten auf Regeln (https://jira.faktorzehn.de/browse/FIPS-8286[FIPS-8286])
 * Systemunabhängige Line-Endings in Test-Klassen (https://jira.faktorzehn.de/browse/FIPS-8291[FIPS-8291])
 * getCardinalityFor.. Methoden werden nicht refaktoriert (https://jira.faktorzehn.de/browse/FIPS-8315[FIPS-8315])
 * Mojo sheitert beim Build eines Maven-Projekts mit gesetztem <name> (https://jira.faktorzehn.de/browse/FIPS-8321[FIPS-8321])
 * faktorips-maven-plugin schlägt mit ".project is out of sync with the file system" fehl (https://jira.faktorzehn.de/browse/FIPS-8340[FIPS-8340])
 * Schema für Tabellen fordert unnötiges format-Attribut (https://jira.faktorzehn.de/browse/FIPS-8346[FIPS-8346])
 * XML von unbekannten ExtensionProperties wird bei Migration auf 21.12 um xmlns="" ergänzt (https://jira.faktorzehn.de/browse/FIPS-8349[FIPS-8349])
 * XML-Schema fehlerhaft bei Tabellen mit null (https://jira.faktorzehn.de/browse/FIPS-8353[FIPS-8353])
 * Bausteinnamen mit doppelten Leerzeichen führen zu Fehler (https://jira.faktorzehn.de/browse/FIPS-8362[FIPS-8362])
 * executionEnvironment sollte als Default das laufende Java nehmen (https://jira.faktorzehn.de/browse/FIPS-8364[FIPS-8364])
 * Annotation in additional and retain führt dazu dass keine neuen Annotations hinzugefügt werden (https://jira.faktorzehn.de/browse/FIPS-8377[FIPS-8377])
 * @Override fehlt manchmal  (https://jira.faktorzehn.de/browse/FIPS-8411[FIPS-8411])